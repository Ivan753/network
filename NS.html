<meta charset="UTF-8">
<canvas height='32' width='32' id='example' style="border: 1px solid #000;">Обновите браузер</canvas><!-- for images -->
<script src="jquery-2.1.4.js"></script>
<script src="main_script.js"></script>
<script>

var example = document.getElementById("example"),
ctx         = example.getContext('2d');


$('#example').mousedown(function(e){
var mouseX = e.pageX - this.offsetLeft;
var mouseY = e.pageY - this.offsetTop;

paint = true;
addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);
redraw();
});


$('#example').mousemove(function(e){
if(paint){
addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop, true);
redraw();
}
});



$('#example').mouseup(function(e){
paint = false;
});



$('#example').mouseleave(function(e){
paint = false;
});


var clickX =  new Array();
var clickY =  new Array();
var clickDrag =  new Array();
var paint;

function addClick(x, y, dragging)
{
clickX.push(x);
clickY.push(y);
clickDrag.push(dragging);
}



function redraw(){
ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height); // Очистим холст

ctx.strokeStyle = "#4455ff";
ctx.lineJoin = "round";
ctx.lineWidth = 2;

for(var i=0; i < clickX.length; i++) {		
ctx.beginPath();
if(clickDrag[i] && i){
ctx.moveTo(clickX[i-1], clickY[i-1]);
}else{
ctx.moveTo(clickX[i]-1, clickY[i]);
}
ctx.lineTo(clickX[i], clickY[i]);
ctx.closePath();
ctx.stroke();
}
}
</script>

